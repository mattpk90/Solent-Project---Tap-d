<!--
Created by Matt Kennedy, 2011-2012.
Property of Matt Kennedy and Southampton Solent University.
-->

<!--
Todo/ideas:
slidey thing from the left, a control panel to start new games, add cards etc?
Dimensions of cards- 0.7:1

-For drag and drop look into 'sortable' jqueryui.
-initialise function for reset
-change cards to have id as well as class
-drag over library, layover on card with 'add to library'
-stopimmediatepropagation: stops all following functions with same name from calling
-store cards in localstorage, convert to javascript array? no database
-when helper dropped over library, disappears, not add card to field
-->

<!DOCTYPE html>
<html>
<head>
	<title>Tap'd</title>
	<link rel="stylesheet" type="text/css" href="main.css" />
	<script type='text/javascript' src='jquery.js'></script>
	<script type='text/javascript' src='jquery-ui.js'></script>
	
	<script type='text/javascript'>	
	$(document).ready(onLoad);

	function onLoad() {

		var libraryArray = [1,2,3];

		$(".card").draggable({ cursor: 'move', snap: true, snapTolerance: 5, stack: ".card",
			stop: function(event, ui){ $('body').css('cursor','default') }
		});		

		$(".cardback").draggable({ cursor: 'move', revert: 'invalid',
			helper: "clone",
			stop: function(event, ui){ $('body').css('cursor','default') }
		});	
			
			
		$("#container").droppable({
			accept: '.cardback',
			tolerance: 'pointer',
			drop: function(event, ui) {
				var cardName = $(libraryArray).get(0);
				libraryArray.splice(0,1);
			    var newDiv = $(ui.helper).clone(false)
			      .addClass('card')
			      .addClass('ui-draggable')
			      .removeClass('ui-draggable-dragging')
			      .removeClass('cardback')
			      .attr('id', cardName)
			      .html(cardName);
			    if(libraryArray.length == 0) { $(".cardback").hide(); }
			    $("#container").append(newDiv);
			    $(".card").draggable({ cursor: 'move', snap: true, snapTolerance: 5, stack: ".card" });
			    $("#library").css('border-color', '#d6d3c0');
			    $("#hand").css('border-color', '#d6d3c0');
			    $("#graveyard").css('border-color', '#d6d3c0');
			    $("#battlefield").css('border-color', '#d6d3c0');
			    $("#exile").css('border-color', '#d6d3c0');
			    $('body').css('cursor','default');			    
			}
		});

		$("#library").droppable({
			tolerance: 'pointer',
			over: function(event, ui){
				$("#library").css('border-color', 'yellow');
			},
			out: function(event, ui){
				$("#library").css('border-color', '#d6d3c0');
			},
			drop: function(event, ui){
				$("#library").css('border-color', '#d6d3c0');				
					$(".cardback").show();
					var cardID = ui.draggable.attr("id");
					ui.draggable.hide();			
					libraryArray.unshift(cardID);
					$('body').css('cursor','default');								
			}
		});	

		$("#battlefield").droppable({
			tolerance: 'pointer',
			over: function(event, ui){
				$("#battlefield").css('border-color', 'yellow');
			},
			out: function(event, ui){
				$("#battlefield").css('border-color', '#d6d3c0');
			}
			,
			drop: function(event, ui){
				$("#battlefield").css('border-color', '#d6d3c0');
			}
		});

		$("#graveyard").droppable({
			tolerance: 'pointer',
			over: function(event, ui){
				$("#graveyard").css('border-color', 'yellow');
			},
			out: function(event, ui){
				$("#graveyard").css('border-color', '#d6d3c0');
			},
			drop: function(event, ui){
				$("#graveyard").css('border-color', '#d6d3c0');
			}
		});

		$("#exile").droppable({
			tolerance: 'pointer',
			over: function(event, ui){
				$("#exile").css('border-color', 'yellow');
			},
			out: function(event, ui){
				$("#exile").css('border-color', '#d6d3c0');
			},
			drop: function(event, ui){
				$("#exile").css('border-color', '#d6d3c0');
			}
		});

		$("#hand").droppable({
			tolerance: 'pointer',
			over: function(event, ui){
				$("#hand").css('border-color', 'yellow');
			},
			out: function(event, ui){
				$("#hand").css('border-color', '#d6d3c0');
			},
			drop: function(event, ui){
				$("#hand").css('border-color', '#d6d3c0');
			}
		});
	};
	</script>
</head>


<body>
<div id="container">
	<div id="login"> Username: <input id="username"/> Password: <input id="password" type="password"/> <input id="submit" type="submit" value="Log In"/> </div>
	<a href="index.html"><div id="logoDiv"></div></a>
	
	<div id="battlefield">
		<div id="crystalline_sliver_1" class="card">
			<div class="cardName"> Crystalline Sliver</div>
			<div class="cardCost"> UW </div>
			<div class="cardText"> All slivers have shroud. </div>
			<br /><br />
			<div class="cardToughness"> 2 </div>
			<div class="cardPower"> 2 </div>
		</div>
	</div>

	<div id="info">
		<div id="topinfo">
			<a href="add_deck.html"><button name="addcard" type="button">Add Deck</button></a>
			<a href="xmlscript.php"><button name="xmlscript" type="button">xmlscript</button></a>
			<br />
		</div>
		
		<div id="cardinfo">Card Information</div>
	</div>
	
	<div id="bottomContainer">
		<div id="hand">
			<div id="card1" class="card"></div>
			<!-- <div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div>
			<div class="card"></div> -->
		</div>

		<div id="library"> Library <br />
			<div class="cardback"></div>
		</div>

		<div id="graveyard">Graveyard</div>
		<div id="exile">Exile</div>
	</div>
</div>
</body>
</html>