<!--
Created by Matt Kennedy, 2011-2012.
Property of Matt Kennedy and Southampton Solent University.


To do:
add box to preview full card details on hover/click of card list
remove individual cards from list
-->

<!DOCTYPE html>
<html>
<head>
	<title>Add Deck</title>
	<link rel="stylesheet" type="text/css" href="main.css" />
	<link rel="stylesheet" type="text/css" href="jquery-ui-css.css" />
	<script type='text/javascript' src='jquery.js'></script>
	<script type='text/javascript' src='jquery-ui.js'></script>
	
	<script type='text/javascript'>	
	$(document).ready(onLoad);

	function onLoad() {
		$("#cardList").sortable();
		$("#cardList").disableSelection();

		if(localStorage.length > 0)
		{
			for(var i=0; i < localStorage.length; i++)
			{
				cardKey = localStorage.key(i);
				var getCardValues = localStorage.getItem(cardKey);
				var values = getCardValues.split(";");
				var nameA = values[0];
				var costA = values[1];
				var textA = values[2];
				var powerA = values[3];
				var toughnessA = values[4];

				$("#cardList").append("<li class='ui-state-default'>Name: " + 
					nameA + ", Cost: " + costA + "</li>");
			}
		}
		else
		{
			$("#cardList").append("No cards added yet.");
		}

	}

	function clearDeck()
	{
		localStorage.clear();
		alert("Deck cleared.");
		window.location.reload();
	}	

	function addPlains()
	{
		var cardValues = [];		
		var nameVal = "Plains";
		var costVal, textVal, powerVal, toughnessVal = "";
		
		cardValues.push(nameVal);
		cardValues.push(costVal);
		cardValues.push(textVal);
		cardValues.push(powerVal);
		cardValues.push(toughnessVal);

		var count = localStorage.length;	
		var cardID = count;	
		localStorage.setItem(cardID, cardValues.join(";"));	
		count++;
		cardValues.length = 0;
		window.location.reload();
	}
	
	function addIsland()
	{
		var cardValues = [];			
		var nameVal = "Island";
		var costVal, textVal, powerVal, toughnessVal = "";
		
		cardValues.push(nameVal);
		cardValues.push(costVal);
		cardValues.push(textVal);
		cardValues.push(powerVal);
		cardValues.push(toughnessVal);

		var count = localStorage.length;	
		var cardID = count;	
		localStorage.setItem(cardID, cardValues.join(";"));	
		count++;
		cardValues.length = 0;
		window.location.reload();
	}
	
	function addMountain()
	{
		var cardValues = [];			
		var nameVal = "Mountain";
		var costVal, textVal, powerVal, toughnessVal = "";
		
		cardValues.push(nameVal);
		cardValues.push(costVal);
		cardValues.push(textVal);
		cardValues.push(powerVal);
		cardValues.push(toughnessVal);

		var count = localStorage.length;	
		var cardID = count;	
		localStorage.setItem(cardID, cardValues.join(";"));		
		count++;
		cardValues.length = 0;
		window.location.reload();
	}
	
	function addForest()
	{
		var cardValues = [];			
		var nameVal = "Forest";
		var costVal, textVal, powerVal, toughnessVal = "";
		
		cardValues.push(nameVal);
		cardValues.push(costVal);
		cardValues.push(textVal);
		cardValues.push(powerVal);
		cardValues.push(toughnessVal);

		var count = localStorage.length;	
		var cardID = count;	
		localStorage.setItem(cardID, cardValues.join(";"));			
		count++;
		cardValues.length = 0;
		window.location.reload();
	}
	
	function addSwamp()
	{
		var cardValues = [];			
		var nameVal = "Swamp";
		var costVal, textVal, powerVal, toughnessVal = "";
		
		cardValues.push(nameVal);
		cardValues.push(costVal);
		cardValues.push(textVal);
		cardValues.push(powerVal);
		cardValues.push(toughnessVal);

		var count = localStorage.length;	
		var cardID = count;		
		localStorage.setItem(cardID, cardValues.join(";"));		
		count++;
		cardValues.length = 0;
		window.location.reload();
	}	

	</script>
</head>

<body>
	<ul id="cardList">
	Current Deck: <br /><br />
	</ul>


	<a href="index.html"><button name="home" type="button"/>Home</button></a><br /><br />

	<table>
	<tr>	<td>Type:</td> 
			<td><select>
				<option id="creature">Creature</option>
				<option id="instant">Instant</option>
				<option id="sorcery">Sorcery</option>
				<option id="enchantment">Enchamtment</option>
				<option id="artifact">Artifact</option>
				</select></td>
	</tr>
	</table>
	<!-- modify add card table based on card type when selected-->

	<form id="addCard">
	<table>
	<tr>	<td>Card Name:</td> <td><input type="text" id="name" /></td>					</tr>
	<tr>	<td>Mana Cost:</td> <td><input type="text" id="cost" /></td>					</tr>
	<tr>	<td>Text:</td> <td><input type="text" id="text" /></td>						</tr>
	<tr>	<td>Power:</td> <td><input type="text" id="power" />&nbsp;&nbsp;</td>
			<td>Toughness:</td> <td><input type="text" id="toughness" /></td>				</tr>
	<tr>	<td><button id="addSingleCard" type="submit"/>Add Card</button></td>	</tr>
	</table>
	</form>

	<table><tr><td><button onclick="addPlains()">Add Plains</button></td>
			<td><button onclick="addIsland()">Add Island</button></td>
			<td><button onclick="addMountain()">Add Mountain</button></td>
			<td><button onclick="addForest()">Add Forest</button></td>
			<td><button onclick="addSwamp()">Add Swamp</button></td></tr></table>

	<button onclick="clearDeck()">Clear</button>

<script type='text/javascript'>	
	$("#addCard").submit(
		function(){
			var cardValues = [];
			var count = localStorage.length;
			
			var cardID = count;		
			var nameVal = $("#name").val();
			var costVal = $("#cost").val();
			var textVal = $("#text").val();
			var powerVal = $("#power").val();
			var toughnessVal = $("#toughness").val();
			
			cardValues.push(nameVal);
			cardValues.push(costVal);
			cardValues.push(textVal);
			cardValues.push(powerVal);
			cardValues.push(toughnessVal);

			
			localStorage.setItem(cardID, cardValues.join(";"));
			cardValues.length = 0;		
			//$("#test").html(cardValues);
		}
	);	

	

	/*var cardKey = localStorage.key(0);
	var getCardValues = localStorage.getItem(cardKey);
	var values = getCardValues.split(";");
	var nameA = values[0];
	var costA = values[1];
	var textA = values[2];
	var powerA = values[3];
	var toughnessA = values[4];
	$("#test").html(cardKey + nameA + costA + textA + powerA + toughnessA);

	for (var i = 0; i < localStorage.length; i++){
    				$(this).append("<li class='ui-state-default'>" + 
    				localStorage.getItem(localStorage.key(i)) + "</li>");
				}

	*/
	</script>

</body>
</html>